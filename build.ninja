cxx = clang
cflags = -O2 -fPIC
ldflags =

rule compile
  command = $cxx -c $cflags -o $out $in

rule build-exe
  command = $cxx -o $out $in $ldflags


build ./smol-editor: build-exe ./main.cc edit/edit.o | ./main.cc some_utility/some_utility
build edit/edit.o: compile edit/lib.cpp | edit/lib.cpp edit/editor.hh
build some_utility/some_utility: build-exe some_utility/main.cc  | some_utility/main.cc 

